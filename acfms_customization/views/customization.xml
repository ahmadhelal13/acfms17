<?xml version='1.0' encoding='utf-8'?>
<odoo>

    <record id="view_payment_form" model="ir.ui.view">
        <field name="name">account.payment.view.form.inherit</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_form"/>
        <field name="arch" type="xml">
            <field name="partner_bank_id" position="after">
                <field name="total_discount"/>
                <field name="total_amount"/>
                <field name="partial_discount"/>
                <field name="appointment_name"/>
            </field>
        </field>
    </record>

    <record id="account_move_inherit_module_name" model="ir.ui.view">
        <field name="name">account.move.view.form.inherit</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@id='invoice_tab']/field[@name='invoice_line_ids']/tree/field[@name='price_subtotal']" position="before">
                <field name="notes" force_save="1"/>
            </xpath>
            <xpath expr="//page[@id='aml_tab']/field[@name='line_ids']/tree/field[@name='balance']" position="before">
                <field name="notes" force_save="1"/>
            </xpath>
        </field>
    </record>

    <record id="product_template_form_view" model="ir.ui.view">
        <field name="name">product.template.view.form.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="ksc_clinic_base.product_template_form_view"/>
        <field name="arch" type="xml">
            <field name="clinical_type" position="attributes">
                <attribute name="groups"></attribute>  <!--ksc_dental.ksc_dental_manager,ksc_dermatology.ksc_dermatology_manager,ksc_general_practitioner.ksc_practitioner_manager,ksc_internal_medicine.ksc_medicine_manager,ksc_nose_and_ear.ksc_nose_and_ear_manager,ksc_nutrition.ksc_nutrition_manager,ksc_obstetrics_and_gynecology.ksc_obstetrics_and_gynecology_manager,ksc_ophthalmology.ksc_ophthalmology_manager,ksc_orthopedic.ksc_orthopedic_manager,ksc_pediatric.ksc_pediatric_manager,ksc_physiotherapy.ksc_physiotherapy_manager,ksc_radiology.ksc_radiology_manager,ksc_urology.ksc_urology_manager -->
            </field>
          
            <group name="clinic" position="attributes">
                <attribute name="groups"></attribute>  <!-- ksc_dental.ksc_dental_manager,ksc_dermatology.ksc_dermatology_manager,ksc_general_practitioner.ksc_practitioner_manager,ksc_internal_medicine.ksc_medicine_manager,ksc_nose_and_ear.ksc_nose_and_ear_manager,ksc_nutrition.ksc_nutrition_manager,ksc_obstetrics_and_gynecology.ksc_obstetrics_and_gynecology_manager,ksc_ophthalmology.ksc_ophthalmology_manager,ksc_orthopedic.ksc_orthopedic_manager,ksc_pediatric.ksc_pediatric_manager,ksc_physiotherapy.ksc_physiotherapy_manager,ksc_radiology.ksc_radiology_manager,ksc_urology.ksc_urology_manager -->
            </group>
        </field>
    </record>


    <record id="view_partner_form" model="ir.ui.view">
        <field name="name">res.partner.view.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <field name="gender" position="attributes">
                <attribute name="required">1</attribute>
            </field>
            <field name="birthday" position="attributes">
                <attribute name="required">is_patient or is_physician</attribute>
                <!--TODO: Result from converting 'attrs' attribute override without options for ['invisible', 'readonly', 'column_invisible'] to separate attributes
                     Remove redundant empty tags below for any of those attributes that are not present in the field tag in any of the parent views
                     If someone later adds one of these attributes in the parent views, they would likely be unaware it's still overridden in this view, resulting in unexpected behaviour, which should be avoided-->
                <!--TODO: Result from 'attrs' -> 'invisible' conversion without also overriding 'states' attribute
                     Check if this field tag contained a states attribute in any of the parent views, that should be combined into this 'invisible' attribute
                     (If any states attributes existed in parent views, they'll also be marked with a TODO)-->
                <attribute name="invisible"/>
                <attribute name="readonly"/>
                <attribute name="column_invisible"/>
            </field>
            <field name="type" position="attributes">
                <attribute name="groups">
                    base.group_system
                </attribute>
            </field>
            <field name="category_id" position="attributes">
                <attribute name="groups">
                    base.group_system
                </attribute>
            </field>
            <field name="title" position="attributes">
                <attribute name="groups">
                    base.group_system
                </attribute>
            </field>
            <!--             <field name="phone" position="attributes">
                <attribute name="groups">
                    base.group_system
                </attribute>
            </field> -->
            <xpath expr="//field[@name='code']" position="after">
                <field name="phone" widget="phone"/>
            </xpath>
            <field name="function" position="before">
                <field name="general_file_no" invisible="not is_patient" placeholder="File Number"/>
                <field name="derma_file_no" invisible="not is_patient" placeholder="Derma Number"/>
                <field name="dental_file_no" invisible="not is_patient" placeholder="Denta Number"/>
            </field>
            <xpath expr="//page[@name='internal_notes']/field[@name='comment']" position="after">
                <field name="civil_gender" nolabel="1" style="width: 30px;" options="{'no_create':True,'no_open': True}"/>
            </xpath>
        </field>
    </record>

    <record id="acoount_tree_view_inherit" model="ir.ui.view">
        <field name="name">acoount_tree_view_name</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_invoice_tree"/>
        <field name="active" eval="True"/>
        <field name="key" eval="False"/>
        <field name="mode">extension</field>
        <field name="priority">99</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//field[@name='amount_untaxed_signed']" position="replace">
                    <field name="invoice_partner_display_name"/>
                </xpath>
                <xpath expr="//field[@name='activity_ids']" position="replace"/>
                <xpath expr="//field[@name='invoice_date_due']" position="replace"/>
                <field name="name" position="after">
                    <field name="invoice_date"/>
                </field>
            </data>
        </field>
    </record>


    <record id="acoount_payment_tree_view_inherit" model="ir.ui.view">
        <field name="name">acoount_payment_tree_view_name</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_tree"/>
        <field name="active" eval="True"/>
        <field name="key" eval="False"/>
        <field name="mode">extension</field>
        <field name="priority">99</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <!-- <field name="amount" position="replace">
                <field name="signed_amount" decoration-bf="1" sum="Signed Amount"/>
            </field> -->
            <field name="payment_method_line_id" position="before">
                <field name="physician_id"/>
            </field>
        </field>
    </record>

    <record id="acoount_search_view_inherit" model="ir.ui.view">
        <field name="name">acoount_search_view_name</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_account_invoice_filter"/>
        <field name="active" eval="True"/>
        <field name="key" eval="False"/>
        <field name="mode">extension</field>
        <field name="priority">99</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
            <filter name="invoice_date" position="before">
                <filter name="today" string="Today" domain="[('create_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))), ('create_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)))]"/>
                <filter name="yasterday" string="Yesterday" domain="[('create_date','&lt;=', datetime.datetime.combine(context_today()-datetime.timedelta(days=1),                     datetime.time(23,59,59))), ('create_date','&gt;=', datetime.datetime.combine(context_today()-datetime.timedelta(days=1), datetime.time(0,0,0)))]"/>
                <filter string="Last Week" name="last_week" domain="[('create_date','&gt;=',((context_today()+relativedelta(weeks=-2,days=1, weekday=0)).strftime('%%Y-%%m-%%d'))), ('create_date','&lt;=', ((context_today()+relativedelta(weeks=-1,weekday=6)).strftime('%%Y-%%m-%%d')))]"/>
                <filter string="Last Month" name="prev_month" domain="[('create_date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01')), ('create_date','&gt;=',time.strftime('%%Y-%%m-01'))]"/>

                <separator/>
                <filter name="customer_invoice" string="Customer Invoice" domain="[('move_type','=','out_invoice')]"/>
                <filter name="credit_note" string="Credit Note" domain="[('move_type','=','out_refund')]"/>
            </filter>
        </field>
    </record>


    <record id="account_view_account_payment_search_inherit" model="ir.ui.view">
        <field name="name">account_view_account_payment_search</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_search"/>
        <field name="active" eval="True"/>
        <field name="key" eval="False"/>
        <field name="mode">extension</field>
        <field name="priority">99</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
            <filter name="date" position="before">
                <filter name="today" string="Today" domain="[('create_date','&lt;=', datetime.datetime.combine(context_today(), datetime.time(23,59,59))), ('create_date','&gt;=', datetime.datetime.combine(context_today(), datetime.time(0,0,0)))]"/>
                <filter name="yasterday" string="Yesterday" domain="[('create_date','&lt;=', datetime.datetime.combine(context_today()-datetime.timedelta(days=1),                     datetime.time(23,59,59))), ('create_date','&gt;=', datetime.datetime.combine(context_today()-datetime.timedelta(days=1), datetime.time(0,0,0)))]"/>
                <filter string="Last Week" name="last_week" domain="[('create_date','&gt;=',((context_today()+relativedelta(weeks=-2,days=1, weekday=0)).strftime('%%Y-%%m-%%d'))), ('create_date','&lt;=', ((context_today()+relativedelta(weeks=-1,weekday=6)).strftime('%%Y-%%m-%%d')))]"/>
                <filter string="Last Month" name="prev_month" domain="[('create_date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01')), ('create_date','&gt;=',time.strftime('%%Y-%%m-01'))]"/>

                <separator/>
                <filter name="customer_invoice" string="Customer Invoice" domain="[('move_type','=','out_invoice')]"/>
                <filter name="credit_note" string="Credit Note" domain="[('move_type','=','out_refund')]"/>
            </filter>
        </field>
    </record>


    <record id="acoount_form_view_inherit" model="ir.ui.view">
        <field name="name">acoount_form_view_name</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="active" eval="True"/>
        <field name="key" eval="False"/>
        <field name="mode">extension</field>
        <field name="priority">99</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="before">
                <div class="alert alert-danger" role="alert" style="margin-bottom:0px;" invisible="not has_credit_note or move_type == 'out_refund'">
                    Take Care This Invoice Has Credit Note
                </div>
                <div class="alert alert-danger" role="alert" style="margin-bottom:0px;" invisible="move_type != 'out_refund'">
                    Take Care This Invoice Is Credit Note
                </div>
                <field name="has_credit_note" invisible="1"/>
            </xpath>
        </field>
    </record>

    <!--print_report method is called from server action-->
    <record id="action_report_all_clinic_payments" model="ir.actions.server">
        <field name="name">Closing Cashair Shift</field>
        <field name="type">ir.actions.server</field>
        <field name="model_id" ref="model_account_payment"/>
        <field name="state">code</field>
        <field name="code">
            action = model.print_payment_without_affia()
        </field>
    </record>

    <menuitem id="action_menu_all_clinic_payment" name="Closing Cashair Shift" sequence="60" action="acfms_customization.action_report_all_clinic_payments" web_icon="acfms_customization,static/description/commerce.png"/>

    <record id="view_account_move_reversal_inherit" model="ir.ui.view">
        <field name="name">account.move.reversal.view.form.inherit</field>
        <field name="model">account.move.reversal</field>
        <field name="inherit_id" ref="account.view_account_move_reversal"/>
        <field name="arch" type="xml">
            <!-- Removed from odoo 17 -->
            <!-- <field name="refund_method" position="attributes">
                <attribute name="groups">
                    ksc_dental.ksc_dental_manager,ksc_dermatology.ksc_dermatology_manager,ksc_general_practitioner.ksc_practitioner_manager,ksc_internal_medicine.ksc_medicine_manager,ksc_nose_and_ear.ksc_nose_and_ear_manager,ksc_nutrition.ksc_nutrition_manager,ksc_obstetrics_and_gynecology.ksc_obstetrics_and_gynecology_manager,ksc_ophthalmology.ksc_ophthalmology_manager,ksc_orthopedic.ksc_orthopedic_manager,ksc_pediatric.ksc_pediatric_manager,ksc_physiotherapy.ksc_physiotherapy_manager,ksc_radiology.ksc_radiology_manager,ksc_urology.ksc_urology_manager,acfms_customization.can_see_credit_note_info
                </attribute>
            </field> -->
            <!-- Updtated date_mode to date -->
            <field name="date" position="attributes">
                <attribute name="groups">
                    ksc_dental.ksc_dental_manager,ksc_dermatology.ksc_dermatology_manager,ksc_general_practitioner.ksc_practitioner_manager,ksc_internal_medicine.ksc_medicine_manager,ksc_nose_and_ear.ksc_nose_and_ear_manager,ksc_nutrition.ksc_nutrition_manager,ksc_obstetrics_and_gynecology.ksc_obstetrics_and_gynecology_manager,ksc_ophthalmology.ksc_ophthalmology_manager,ksc_orthopedic.ksc_orthopedic_manager,ksc_pediatric.ksc_pediatric_manager,ksc_physiotherapy.ksc_physiotherapy_manager,ksc_radiology.ksc_radiology_manager,ksc_urology.ksc_urology_manager,acfms_customization.can_see_credit_note_info
                </attribute>
            </field>
            <field name="journal_id" position="attributes">
                <attribute name="groups">
                    ksc_dental.ksc_dental_manager,ksc_dermatology.ksc_dermatology_manager,ksc_general_practitioner.ksc_practitioner_manager,ksc_internal_medicine.ksc_medicine_manager,ksc_nose_and_ear.ksc_nose_and_ear_manager,ksc_nutrition.ksc_nutrition_manager,ksc_obstetrics_and_gynecology.ksc_obstetrics_and_gynecology_manager,ksc_ophthalmology.ksc_ophthalmology_manager,ksc_orthopedic.ksc_orthopedic_manager,ksc_pediatric.ksc_pediatric_manager,ksc_physiotherapy.ksc_physiotherapy_manager,ksc_radiology.ksc_radiology_manager,ksc_urology.ksc_urology_manager,acfms_customization.can_see_credit_note_info
                </attribute>
            </field>
            <field name="date" position="attributes">
                <attribute name="groups">
                    ksc_dental.ksc_dental_manager,ksc_dermatology.ksc_dermatology_manager,ksc_general_practitioner.ksc_practitioner_manager,ksc_internal_medicine.ksc_medicine_manager,ksc_nose_and_ear.ksc_nose_and_ear_manager,ksc_nutrition.ksc_nutrition_manager,ksc_obstetrics_and_gynecology.ksc_obstetrics_and_gynecology_manager,ksc_ophthalmology.ksc_ophthalmology_manager,ksc_orthopedic.ksc_orthopedic_manager,ksc_pediatric.ksc_pediatric_manager,ksc_physiotherapy.ksc_physiotherapy_manager,ksc_radiology.ksc_radiology_manager,ksc_urology.ksc_urology_manager,acfms_customization.can_see_credit_note_info
                </attribute>
            </field>
        </field>
    </record>


    <record id="account_view_account_journal_form_inherit" model="ir.ui.view">
        <field name="name">account_view_account_journal_form_inherit</field>
        <field name="model">account.journal</field>
        <field name="inherit_id" ref="account.view_account_journal_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='type']" position="after">
                <field name="is_knet"/>
                <field name="no_show_in_payment"/>

            </xpath>
        </field>
    </record>

</odoo>