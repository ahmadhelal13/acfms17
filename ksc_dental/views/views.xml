<?xml version='1.0' encoding='utf-8'?>
<odoo>

    <record id="view_account_journal_form" model="ir.ui.view">
        <field name="name">account.journal.view.form.inherit</field>
        <field name="model">account.journal</field>
        <field name="inherit_id" ref="ksc_clinic_base.view_account_journal_form"/>
        <field name="arch" type="xml">
            <group name="clinic" position="inside">
                <field name="avalibel_in_dental"/>
            </group>
        </field>
    </record>

    <record id="product_template_form_view" model="ir.ui.view">
        <field name="name">product.template.view.form.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="ksc_clinic_base.product_template_form_view"/>
        <field name="arch" type="xml">
            <group name="clinic" position="inside">
                <field name="avalibel_in_dental"/>
            </group>
        </field>
    </record>

    <record id="action_patient" model="ir.actions.act_window">
        <field name="name">Patient</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">kanban,tree,form,activity</field>
        <field name="domain">[('is_patient','=',True)]</field>
        <field name="context">{ 'default_is_patient' : 1 }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No Record Found
            </p>
            <p>
                Click to add a Patient
            </p>
        </field>
    </record>

    <record id="view_partner_form" model="ir.ui.view">
        <field name="name">res.partner.view.form.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <header position="inside">
                <button name="action_dental_client" type="object" string="Open Dental View" class="oe_highlight btn-danger" invisible="is_physician" groups="ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_doctor"/>
            </header>

            <page name="clinic" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager</attribute>
            </page>

            <xpath expr="//field[@name='diseases_ids']//field[@name='name']" position="after">
                <field name="dental_appt_id" groups="ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist,ksc_dental.ksc_dental_doctor"/>
            </xpath>
            <xpath expr="//page[@name='diseases_ids']" position="attributes">
                <attribute name="readnly">ksc_dental.ksc_dental_receptionist</attribute>
            </xpath>
            <xpath expr="//page[@name='medical_history']" position="inside">
                <group string="Dental">
                    <field name="extra_oral_exam"/>
                    <field name="intra_oral_exam"/>
                    <field name="x_ray_investigation"/>
                    <field name="periaplcal"/>
                    <field name="occlusal"/>
                    <field name="b_w"/>
                    <field name="o_p_g"/>
                    <field name="other_investigations"/>
                    <field name="diagnosis" string="Diagnosis"/>
                    <field name="treatment_procedures"/>
                </group>
            </xpath>
            <!-- <page name="clinical_ass" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_doctor</attribute>
            </page>
            <page name="diseases_ids" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_doctor</attribute>
            </page> -->
            <!-- <xpath expr="//button[@name='open_partner_ledger']" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager</attribute>
            </xpath> -->
            <xpath expr="//notebook" position="inside">
                <page string="Dental All Operations" groups="ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist,ksc_dental.ksc_dental_doctor">
                    <field name="teeth_treatment_ids" nolabel="1">
                        <tree>
                            <field name="compute_date_create"/>
                            <field name="create_uid"/>
                            <field name="teeth_id"/>
                            <field name="description"/>
                            <field name="detail_description"/>
                            <field name="state"/>
                            <field name="amount"/>
                            <field name="discount"/>
                            <field name="total" sum="total"/>
                        </tree>
                    </field>
                </page>


                <page string="Dental Planned" groups="ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist,ksc_dental.ksc_dental_doctor">
                    <field name="planned_operation_ids" nolabel="1">
                        <tree>
                            <field name="compute_date_create"/>
                            <field name="create_uid"/>
                            <field name="teeth_id"/>
                            <field name="description"/>
                            <field name="detail_description"/>
                            <field name="state"/>
                            <field name="amount"/>
                            <field name="discount"/>
                            <field name="invoice_id"/>
                            <field name="total" sum="total"/>
                        </tree>
                    </field>
                    <group class="oe_subtotal_footer oe_right">
                        <field name="amount_planned_total"/>
                        <field name="discount_planned_total"/>
                        <field name="planned_total" class="oe_subtotal_footer_separator"/>
                    </group>
                </page>
                <page string="Dental In Progrees" groups="ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist,ksc_dental.ksc_dental_doctor">
                    <field name="in_progress_operation_ids" nolabel="1">
                        <tree>
                            <field name="compute_date_create"/>
                            <field name="create_uid"/>
                            <field name="teeth_id"/>
                            <field name="description"/>
                            <field name="detail_description"/>
                            <field name="state"/>
                            <field name="amount"/>
                            <field name="discount"/>
                            <field name="invoice_id"/>
                            <field name="total" sum="total"/>
                        </tree>
                    </field>
                </page>
                <page string="Dental Completed" groups="ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist,ksc_dental.ksc_dental_doctor">
                    <field name="completed_operation_ids" nolabel="1">
                        <tree>
                            <field name="compute_date_create"/>
                            <field name="create_uid"/>
                            <field name="teeth_id"/>
                            <field name="description"/>
                            <field name="detail_description"/>
                            <field name="state"/>
                            <field name="amount"/>
                            <field name="discount"/>
                            <field name="invoice_id"/>
                            <field name="total" sum="total"/>
                        </tree>
                    </field>
                </page>
                <page string="Orthodontic Plan" groups="ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist,ksc_dental.ksc_dental_doctor">
                    <field name="readonly_based_on_reception_group" invisible="1"/>
                    <field name="ortho_plan_ids" nolabel="1">
                        <tree editable="bottom">
                            <field name="patient_id" invisible="1"/>
                            <field name="create_date" readonly="parent.readonly_based_on_reception_group"/>
                            <field name="create_uid" readonly="parent.readonly_based_on_reception_group"/>
                            <field name="physician_id" readonly="parent.readonly_based_on_reception_group"/>
                            <field name="product_id" readonly="parent.readonly_based_on_reception_group"/>
                            <field name="state" readonly="parent.readonly_based_on_reception_group"/>
                            <field name="amount" sum="total" readonly="parent.readonly_based_on_reception_group"/>
                            <field name="invoiced" invisible="1" readonly="parent.readonly_based_on_reception_group"/>
                            <field name="invoice_id" invisible="not invoiced" readonly="parent.readonly_based_on_reception_group" widget="many2one_clickable"/>
                            <button name="create_invoice" string="Create invoice" type="object" invisible="invoiced and patient_id" readonly="parent.readonly_based_on_reception_group"/>
                        </tree>
                    </field>
                </page>
                <page string="Treatment Plan Details" name="treatment_plan_details" groups="ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_doctor">
                    <field name="treatment_plan_details_ids" nolabel="1">
                        <tree editable="bottom">
                            <field name="note" class="ksc_dental_note"/>
                            <field name="create_uid"/>
                            <field name="create_date"/>
                            <field name="write_date"/>
                            <field name="write_uid"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>

    <record id="view_company_form" model="ir.ui.view">
        <field name="name">res.company.view.form.inherit</field>
        <field name="model">res.company</field>
        <field name="inherit_id" ref="base.view_company_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page name="dental" string="Dental">
                    <group>
                        <group name="chart_type" string="Teeth Chart Selection">
                            <field name="chart_type"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <!--     <record id="account_reports_form_inherit_dental" model="ir.ui.view">
        <field name="name">account_reports.view.form.inherit.dental</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account_reports.partner_view_buttons" />
        <field name="arch" type="xml">
            <xpath expr="//button[@name='open_partner_ledger']" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager</attribute>
            </xpath>

            <xpath expr="//button[@name='action_view_partner_invoices']" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager</attribute>
            </xpath>
        </field>
    </record> -->



    <!-- ===============purchase================= -->
    <record id="purchase_form_inherit_dental" model="ir.ui.view">
        <field name="name">purchase.view.form.inherit.dental</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="purchase.res_partner_view_purchase_buttons"/>
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist</attribute>
            </xpath>

        </field>
    </record>

    <!-- ===========sale========== -->

    <record id="sale_form_inherit_dental_bills" model="ir.ui.view">
        <field name="name">sale_view.form.inherit.dental</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="sale.res_partner_view_buttons"/>
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist</attribute>
            </xpath>
            <xpath expr="//button[@name='action_view_sale_order']" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager</attribute>
            </xpath>
        </field>
    </record>


    <!-- =========crm========= -->

    <record id="crm_form_inherit_dental" model="ir.ui.view">
        <field name="name">crm_view.form.inherit.dental</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="crm.view_partners_form_crm1"/>
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist</attribute>
            </xpath>
            <xpath expr="//button[2]" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist</attribute>
            </xpath>
        </field>
    </record>


    <!-- =========account_followup========= -->

    <!--     <record id="account_followup_form_inherit_dental" model="ir.ui.view">
        <field name="name">account_followup.form.inherit.dental</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account_followup.res_partner_view_form" />
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist</attribute>
            </xpath>
        </field>
    </record> -->

    <!-- =========payment========= -->

    <record id="payment_form_inherit_dental" model="ir.ui.view">
        <field name="name">payment.form.inherit.dental</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="payment.view_partners_form_payment_defaultcreditcard"/>
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist</attribute>
            </xpath>
        </field>
    </record>


    <!-- =========website_partner========= -->

    <record id="website_partner_form_inherit_dental" model="ir.ui.view">
        <field name="name">website_partner.form.inherit.dental</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="website_partner.view_partners_form_website"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='is_published']" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager,ksc_dental.ksc_dental_receptionist</attribute>
            </xpath>
        </field>
    </record>

    <!-- ==========for making vendor bills smart button avaliable for manager only  -->
    <!--     <record id="res_partner_view_purchase_account_buttons_dental" model="ir.ui.view">
        <field name="name">purchase_res_partner_view_purchase_account_buttons_dental</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="purchase.res_partner_view_purchase_account_buttons"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='476']" position="attributes">
                <attribute name="groups">ksc_dental.ksc_dental_manager</attribute>
            </xpath>
        </field>
    </record> -->
    <!--    invoice action with domain-->
    <record model="ir.actions.act_window" id="dental_invoices_request">
        <field name="name">invoices</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">account.move</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_today': 1,'search_default_customer_invoice': 1}</field>
        <field name="domain">[('clinic','=','dental'),('move_type','in',['out_invoice','out_refund'])]</field>
    </record>

    <!--    payment action with domain-->
    <record model="ir.actions.act_window" id="dental_payments_request">
        <field name="name">payments</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">account.payment</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('clinic','=','dental')]</field>
    </record>


    <!-- ========for general report============= -->
    <record id="patient_report_wizard_view_form_inherit_dental" model="ir.ui.view">
        <field name="name">patient_report_wizard_view_form_inherit_dental</field>
        <field name="model">patient.wizard</field>
        <field name="inherit_id" ref="ksc_patient_report.patient_report_wizard_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='group_1']//group[@name='group_a']" position="inside">
                <button string="Print Dental Infomation" name="print_dental_info_for_this_patient" type="object" class="oe_highlight"/>
            </xpath>
        </field>
    </record>
</odoo>