<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <record id="view_account_journal_form" model="ir.ui.view">
        <field name="name">account.journal.view.form.inherit</field>
        <field name="model">account.journal</field>
        <field name="inherit_id" ref="ksc_clinic_base.view_account_journal_form"/>
        <field name="arch" type="xml">
            <group name="clinic" position="inside">
                <field name="avalibel_in_physiotherapy"/>
            </group>
        </field>
    </record>

    <record id="product_template_form_view" model="ir.ui.view">
        <field name="name">product.template.view.form.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="ksc_clinic_base.product_template_form_view"/>
        <field name="arch" type="xml">
            <group name="clinic" position="inside">
                <field name="avalibel_in_physiotherapy"/>
                <field name="avalibel_in_physiotherapy_treatment_plan"/>
            </group>
            <field name="description" position="after">
                <group invisible="clinical_type_visible not in ['session_service']">
                    <field name="number_of_session"/>
                    <field name="duration1"/>
                </group>
            </field>
        </field>
    </record>


    <record id="view_partner_form" model="ir.ui.view">
        <field name="name">Patient Lab Test</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <div name="button_box" position="inside">
                <field name="is_patient" invisible="1"/>
                <button name="action_view_physiotherapy" invisible="not is_patient" class="oe_stat_button" icon="fa-th-list" type="object" title="Physiotherapy" groups="ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist">
                    <field string="Physiotherapy" name="physiotherapy_count" widget="statinfo"/>
                </button>
                <button name="action_view_treatment_plan" invisible="not is_patient" class="oe_stat_button" icon="fa-th-list" type="object" title="treatment plan" groups="ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist">
                    <field string="Treatment Plan" name="physiotherapy_count" widget="statinfo"/>
                </button>
                <button name="action_create_treatment_plan" invisible="not is_patient" string="Create Treatment Plan" type="object" class="oe_stat_button" icon="fa-pencil-square-o" groups="ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist"/>
            </div>
            <xpath expr="//notebook//page[@name='accounting']" position="after">
                <page name="dermatology_service" string="Physiotherapy Service Log" groups="ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist,ksc_physiotherapy.ksc_physiotherapy_doctor">
                    <field name="physiotherapy_service_log_ids" readonly="1">
                        <tree>
                            <field name="product_id"/>
                            <field name="number_of_session"/>
                            <field name="sessions_done"/>
                            <field name="sessions_remaining"/>
                            <field name="state"/>
                            <field name="appointment_ids"/>
                        </tree>
                    </field>
                </page>
            </xpath>
            <xpath expr="//field[@name='diseases_ids']//field[@name='name']" position="after">
                <field name="physiotherapy_appt_id" groups="ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_doctor,ksc_physiotherapy.ksc_physiotherapy_receptionist"/>
            </xpath>

            <xpath expr="//page[@name='diseases_ids']" position="attributes">
                <attribute name="readnly">ksc_physiotherapy.ksc_physiotherapy_receptionist</attribute>
            </xpath>
        </field>
    </record>

    <record id="action_patient" model="ir.actions.act_window">
        <field name="name">Patient</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">kanban,tree,form,activity</field>
        <field name="domain">[('is_patient','=',True)]</field>
        <field name="context">{ 'default_is_patient' : 1 }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No Record Found
            </p>
            <p>
                Click to add a Patient
            </p>
        </field>
    </record>


    <!--     <record id="account_reports_form_inherit_physiotherpy" model="ir.ui.view">
        <field name="name">account_reports.view.form.inherit.physiotherpy</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account_reports.partner_view_buttons" />
        <field name="arch" type="xml">
            <xpath expr="//button[@name='open_partner_ledger']" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager</attribute>
            </xpath>


            <xpath expr="//button[@name='action_view_partner_invoices']" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager</attribute>
            </xpath>
        </field>
    </record> -->




    <!-- ===============purchase================= -->
    <record id="purchase_form_inherit_physiotherapy" model="ir.ui.view">
        <field name="name">purchase.view.form.inherit.physiotherapy</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="purchase.res_partner_view_purchase_buttons"/>
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist</attribute>
            </xpath>

        </field>
    </record>

    <!-- ===========sale========== -->

    <record id="sale_form_inherit_physiotherapy_bills" model="ir.ui.view">
        <field name="name">sale_view.form.inherit.physiotherapy</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="sale.res_partner_view_buttons"/>
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist</attribute>
            </xpath>
            <xpath expr="//button[@name='action_view_sale_order']" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager</attribute>
            </xpath>
        </field>
    </record>


    <!-- =========crm========= -->

    <record id="crm_form_inherit_physiotherapy" model="ir.ui.view">
        <field name="name">crm_view.form.inherit.physiotherapy</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="crm.view_partners_form_crm1"/>
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist</attribute>
            </xpath>
            <xpath expr="//button[2]" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist</attribute>
            </xpath>
        </field>
    </record>


    <!-- =========account_followup========= -->

    <!--     <record id="account_followup_form_inherit_physiotherapy" model="ir.ui.view">
        <field name="name">account_followup.form.inherit.physiotherapy</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="account_followup.res_partner_view_form" />
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist</attribute>
            </xpath>
        </field>
    </record> -->

    <!-- =========payment========= -->

    <record id="payment_form_inherit_physiotherapy" model="ir.ui.view">
        <field name="name">payment.form.inherit.physiotherapy</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="payment.view_partners_form_payment_defaultcreditcard"/>
        <field name="arch" type="xml">
            <xpath expr="//button[1]" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist</attribute>
            </xpath>
        </field>
    </record>


    <!-- =========website_partner========= -->

    <record id="website_partner_form_inherit_physiotherapy" model="ir.ui.view">
        <field name="name">website_partner.form.inherit.physiotherapy</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="website_partner.view_partners_form_website"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='is_published']" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager,ksc_physiotherapy.ksc_physiotherapy_receptionist</attribute>
            </xpath>
        </field>
    </record>

    <!-- ==========for making vendor bills smart button avaliable for manager only  -->
    <!--     <record id="res_partner_view_purchase_account_buttons_physio" model="ir.ui.view">
        <field name="name">res_partner_view_purchase_account_buttons_physio</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="purchase.res_partner_view_purchase_account_buttons"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='476']" position="attributes">
                <attribute name="groups">ksc_physiotherapy.ksc_physiotherapy_manager</attribute>
            </xpath>
        </field>
    </record> -->
    <!--    invoice action with domain-->
    <record model="ir.actions.act_window" id="physiotherapy_invoices_request">
        <field name="name">invoices</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">account.move</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_today': 1,'search_default_customer_invoice': 1}</field>
        <field name="domain">[('clinic','=','physiotherapy'),('move_type','in',['out_invoice','out_refund'])]</field>
    </record>

    <!--    payment action with domain-->
    <record model="ir.actions.act_window" id="physiotherapy_payments_request">
        <field name="name">payments</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">account.payment</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('clinic','=','physiotherapy')]</field>
    </record>
    <!-- ========for general report============= -->
    <record id="patient_report_wizard_view_form_inherit_physiotherapy" model="ir.ui.view">
        <field name="name">patient_report_wizard_view_form_inherit_physiotherapy</field>
        <field name="model">patient.wizard</field>
        <field name="inherit_id" ref="ksc_patient_report.patient_report_wizard_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='group_1']//group[@name='group_b']" position="inside">
                <button string="Print Physiotherapy Infomation" invisible="0" name="print_physiotherapy_info_for_this_patient" type="object" class="oe_highlight"/>
            </xpath>
        </field>
    </record>


</odoo>